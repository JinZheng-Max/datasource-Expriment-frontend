记载学生基本信息、参加社会实践活动情况、奖惩情况。管理学生学籍。
记载每学期每门课程学生考试成绩信息，决定是否进入下一年的下一个专业学习或者是毕业。

我的数据库表如下所示：
-- 创建数据库
CREATE DATABASE IF NOT EXISTS student_management DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE student_management;

-- 1. 专业信息表
CREATE TABLE major (
    major_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '专业ID',
    major_code VARCHAR(20) NOT NULL UNIQUE COMMENT '专业代码',
    major_name VARCHAR(100) NOT NULL COMMENT '专业名称',
    department VARCHAR(100) COMMENT '所属院系',
    duration INT DEFAULT 4 COMMENT '学制（年）',
    degree_type VARCHAR(20) COMMENT '学位类型（本科/专科）',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT '专业信息表';

-- 2. 班级信息表
CREATE TABLE class (
    class_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '班级ID',
    class_code VARCHAR(20) NOT NULL UNIQUE COMMENT '班级代码',
    class_name VARCHAR(100) NOT NULL COMMENT '班级名称',
    major_id INT NOT NULL COMMENT '专业ID',
    grade INT NOT NULL COMMENT '年级',
    counselor VARCHAR(50) COMMENT '辅导员',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (major_id) REFERENCES major(major_id)
) COMMENT '班级信息表';

-- 3. 学生基本信息表
CREATE TABLE student (
    student_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '学生ID',
    student_no VARCHAR(20) NOT NULL UNIQUE COMMENT '学号',
    name VARCHAR(50) NOT NULL COMMENT '姓名',
    gender ENUM('男', '女') NOT NULL COMMENT '性别',
    id_card VARCHAR(18) UNIQUE COMMENT '身份证号',
    birth_date DATE COMMENT '出生日期',
    phone VARCHAR(20) COMMENT '联系电话',
    email VARCHAR(100) COMMENT '邮箱',
    admission_date DATE COMMENT '入学日期',
    class_id INT COMMENT '班级ID',
    major_id INT COMMENT '专业ID',
    grade INT COMMENT '年级',
    photo_url VARCHAR(255) COMMENT '照片路径',
    address TEXT COMMENT '家庭住址',
    emergency_contact VARCHAR(50) COMMENT '紧急联系人',
    emergency_phone VARCHAR(20) COMMENT '紧急联系电话',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (class_id) REFERENCES class(class_id),
    FOREIGN KEY (major_id) REFERENCES major(major_id)
) COMMENT '学生基本信息表';

-- 4. 学籍状态表
CREATE TABLE student_status (
    status_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '状态ID',
    student_id INT NOT NULL COMMENT '学生ID',
    status ENUM('在读', '休学', '退学', '毕业', '结业', '肄业') NOT NULL COMMENT '学籍状态',
    current_grade INT COMMENT '当前年级',
    current_major_id INT COMMENT '当前专业ID',
    status_date DATE NOT NULL COMMENT '状态变更日期',
    reason TEXT COMMENT '变更原因',
    remark TEXT COMMENT '备注',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES student(student_id),
    FOREIGN KEY (current_major_id) REFERENCES major(major_id)
) COMMENT '学籍状态表';

-- 5. 社会实践活动表
CREATE TABLE social_practice (
    practice_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '活动ID',
    practice_name VARCHAR(200) NOT NULL COMMENT '活动名称',
    practice_type VARCHAR(50) COMMENT '活动类型（志愿服务/社会调查/实习实践等）',
    organizer VARCHAR(100) COMMENT '组织单位',
    start_date DATE COMMENT '开始日期',
    end_date DATE COMMENT '结束日期',
    description TEXT COMMENT '活动描述',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT '社会实践活动表';

-- 6. 学生社会实践记录表
CREATE TABLE student_practice (
    record_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '记录ID',
    student_id INT NOT NULL COMMENT '学生ID',
    practice_id INT NOT NULL COMMENT '活动ID',
    role VARCHAR(50) COMMENT '担任角色',
    duration DECIMAL(5,1) COMMENT '时长（小时）',
    performance_score DECIMAL(5,2) COMMENT '表现评分',
    evaluation TEXT COMMENT '评价',
    certificate_url VARCHAR(255) COMMENT '证明材料路径',
    status ENUM('待审核', '已通过', '未通过') DEFAULT '待审核' COMMENT '审核状态',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES student(student_id),
    FOREIGN KEY (practice_id) REFERENCES social_practice(practice_id)
) COMMENT '学生社会实践记录表';

-- 7. 奖惩信息表
CREATE TABLE reward_punishment (
    rp_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '奖惩ID',
    student_id INT NOT NULL COMMENT '学生ID',
    type ENUM('奖励', '处分') NOT NULL COMMENT '类型',
    level VARCHAR(50) NOT NULL COMMENT '级别（国家级/省级/校级/院级 或 警告/严重警告/记过等）',
    title VARCHAR(200) NOT NULL COMMENT '奖惩名称',
    reason TEXT COMMENT '原因/事由',
    award_date DATE NOT NULL COMMENT '颁发/处分日期',
    issuing_unit VARCHAR(100) COMMENT '颁发/处分单位',
    certificate_no VARCHAR(100) COMMENT '证书编号',
    certificate_url VARCHAR(255) COMMENT '证书/文件路径',
    cancel_date DATE COMMENT '撤销日期（针对处分）',
    remark TEXT COMMENT '备注',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES student(student_id)
) COMMENT '奖惩信息表';

-- 8. 学期信息表
CREATE TABLE semester (
    semester_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '学期ID',
    semester_code VARCHAR(20) NOT NULL UNIQUE COMMENT '学期代码（如：2024-1）',
    semester_name VARCHAR(50) NOT NULL COMMENT '学期名称（如：2024-2025学年第一学期）',
    academic_year VARCHAR(20) NOT NULL COMMENT '学年（如：2024-2025）',
    semester_order INT NOT NULL COMMENT '学期序号（1或2）',
    start_date DATE NOT NULL COMMENT '开始日期',
    end_date DATE NOT NULL COMMENT '结束日期',
    is_current BOOLEAN DEFAULT FALSE COMMENT '是否当前学期',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT '学期信息表';

-- 9. 课程信息表
CREATE TABLE course (
    course_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '课程ID',
    course_code VARCHAR(20) NOT NULL UNIQUE COMMENT '课程代码',
    course_name VARCHAR(100) NOT NULL COMMENT '课程名称',
    course_type ENUM('必修', '选修', '实践') NOT NULL COMMENT '课程类型',
    credits DECIMAL(3,1) NOT NULL COMMENT '学分',
    hours INT COMMENT '学时',
    major_id INT COMMENT '所属专业ID（NULL表示公共课）',
    semester_order INT COMMENT '建议修读学期',
    description TEXT COMMENT '课程描述',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (major_id) REFERENCES major(major_id)
) COMMENT '课程信息表';

-- 10. 成绩信息表
CREATE TABLE score (
    score_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '成绩ID',
    student_id INT NOT NULL COMMENT '学生ID',
    course_id INT NOT NULL COMMENT '课程ID',
    semester_id INT NOT NULL COMMENT '学期ID',
    regular_score DECIMAL(5,2) COMMENT '平时成绩',
    midterm_score DECIMAL(5,2) COMMENT '期中成绩',
    final_score DECIMAL(5,2) COMMENT '期末成绩',
    total_score DECIMAL(5,2) NOT NULL COMMENT '总评成绩',
    grade_point DECIMAL(3,2) COMMENT '绩点',
    status ENUM('正常', '缓考', '缺考', '作弊') DEFAULT '正常' COMMENT '考试状态',
    is_pass BOOLEAN COMMENT '是否通过',
    is_retake BOOLEAN DEFAULT FALSE COMMENT '是否重修',
    retake_times INT DEFAULT 0 COMMENT '重修次数',
    teacher_name VARCHAR(50) COMMENT '授课教师',
    remark TEXT COMMENT '备注',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (student_id) REFERENCES student(student_id),
    FOREIGN KEY (course_id) REFERENCES course(course_id),
    UNIQUE KEY uk_student_course_semester (student_id, course_id, semester_id, is_retake)
) COMMENT '成绩信息表';

-- 创建索引以提高查询性能
CREATE INDEX idx_student_no ON student(student_no);
CREATE INDEX idx_student_class ON student(class_id);
CREATE INDEX idx_student_major ON student(major_id);
CREATE INDEX idx_status_student ON student_status(student_id);
CREATE INDEX idx_practice_student ON student_practice(student_id);
CREATE INDEX idx_rp_student ON reward_punishment(student_id);
CREATE INDEX idx_score_student ON score(student_id);
CREATE INDEX idx_score_semester ON score(semester_id);
CREATE INDEX idx_score_course ON score(course_id);


USE student_management;

-- 11. 用户角色表
CREATE TABLE role (
    role_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '角色ID',
    role_name VARCHAR(50) NOT NULL COMMENT '角色名称',
    description VARCHAR(200) COMMENT '角色描述',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
) COMMENT '用户角色表';

-- 12. 用户登录表
CREATE TABLE user_account (
    user_id INT PRIMARY KEY AUTO_INCREMENT COMMENT '用户ID',
    username VARCHAR(50) NOT NULL UNIQUE COMMENT '用户名/账号',
    password VARCHAR(255) NOT NULL COMMENT '密码（MD5加密存储）',
    user_type ENUM('student', 'admin') NOT NULL COMMENT '用户类型',
    role_id INT COMMENT '角色ID',
    student_id INT COMMENT '关联学生ID',
    real_name VARCHAR(50) COMMENT '真实姓名',
    created_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    updated_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    FOREIGN KEY (role_id) REFERENCES role(role_id),
    FOREIGN KEY (student_id) REFERENCES student(student_id)
) COMMENT '用户登录表';

-- 插入默认角色数据
INSERT INTO role (role_name, description) VALUES
('系统管理员', '可以对所有功能进行增删改查操作'),
('学生', '只能查看个人信息、社会实践活动、奖惩情况、考试成绩、学籍信息，不能修改或删除');

-- 创建索引
CREATE INDEX idx_user_username ON user_account(username);
CREATE INDEX idx_user_type ON user_account(user_type);

-- 创建默认管理员账号（用户名：admin，密码：admin，MD5加密）
INSERT INTO user_account (username, password, user_type, role_id, real_name) 
VALUES ('admin', '21232f297a57a5a743894a0e4a801fc3', 'admin', 1, '系统管理员');